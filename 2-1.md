# 2-1 欢迎新朋友

## 从玩具到产品

你的第一个插件 HellWorld 只是在日志里输出了一些内容，告诉服主“我们的插件已经加载”。除此之外，它好像并没有什么实际的作用，这就没有什么乐趣了。

像这种**有功能，但不实用或不可靠**的软件，通常被称为“玩具”。

!> “玩具”一词是极不尊重他人的行为。我在这里使用，是为了向你解释清除概念。如果是像我和 Kirara 一样开开玩笑也就算了，但**绝不要在任何正式场合使用这种表述**！

我们的插件开发之旅是从玩具开始的，但我们不能一直制造玩具。因此，我们干脆向前迈一大步 —— 来做个有用的插件。

## Greeter

让我们用一个故事，来引出我们的第二个项目。

> **坠星**
> 
> 樱云岛上的每一部古籍都记载着，传说，“光”的每一位神灵，曾经都是九天上的一颗星星。
> 
> 每当有一位新的神灵将要降临于世时，总会有一颗闪耀无比的流星划过落雪之森，降落在祂将要到达的地方。没有人亲眼见证过这一幕 —— 距离传说中的最近一位神，光之神，降临这片大陆，也已经过去了不知道多少个世代。如果神灵真的存在，那坠星一定是稀世独一的奇观。
> 
> 该说是幸运还是不幸，那场灾难降临后，人们终于从幻想中苏醒过来，不再寄希望于虚无缥缈的神灵，而转向投身于魔法和魔学的研究。至于坠星，当然也还是没人见到过。
> 
> 不过，对于坠星这一现象的向往，甚至超越了神学本身。现在，**每当一位新郡王坐上郡城的王座之时**，古老的精灵魔法师，会用早已为人人所掌握的光魔法，**召唤来几颗比传说中还要耀眼的流星来助助兴**。

说得可能有一些过于玄幻了……我们想做的，是**在有新玩家加入服务器的时候，发送一条消息来欢迎他们**。

## 设计功能

既然已经打算要做个欢迎新人的插件了，我们就得**设计一下它的功能**：

- 当新玩家加入服务器时，在聊天栏**广播一条消息**。

- 欢迎消息对于每个新玩家只播报**一次**（而不是每次加入服务器都显示）。

- 服务器管理员可以使用配置文件来决定消息内容。

仔细看看这三个功能，你就会发现，我们需要写一些代码来做这些事情：

- 检测玩家什么时候加入服务器（事件处理）

- 保存哪些玩家已经被欢迎过（数据存储）

- 读取配置文件并决定消息内容（配置读取）

可以说，**事件处理、数据存储和配置读取**几乎构成了大多数插件 99% 的功能。

虽然你还需要学习一些知识才能弄清楚到底要怎么做这些事情，但是现在，让我们先把能做的做了……

## 创建项目

**打开 IDEA**。如果你在做完 HellWorld 之后没有做些什么稀奇古怪的事情的话，IDEA 会自动打开上次的项目。

所以，现在，点按左上角的“**更多**”（四条横线），把鼠标指针放到“**New（新建）**”上，再在右侧的菜单中单击“**Project（项目）**”。

![.](https://s2.loli.net/2024/01/10/a9nrdFSgp8e4tNy.png)

你将看到非常熟悉的界面：

![.](https://s2.loli.net/2024/01/10/e75EpRWmBSVTH4x.png)

IDEA 还记得你上次创建的是 Minecraft 项目，所以它自动为你选择好了。你只需要在右侧**填入相应的信息**。除了把项目名改为 Greeter 之外，并没有什么不同之处。

?> 你也完全可以自行选择项目名和包名。而且，当你在制作正式的插件的时候，请一定**使用自己的包名**！使用其他人的包名可能被认为是抄袭或者冒名顶替。<br/>你可以在“Build System Properties”中**修改 Group ID 来改变项目组和包名**。比如，我将使用 `skjsjhb.mc` 作为 Group ID，而我的搭档 Kirara 就用了 `kirara.mcplugins` 这样“一看就知道作者是谁”的名字。

都做好了之后，就按下“**Create（创建）**”按钮。IDEA 将询问要不要建立新的窗口，因为我们已经用不到 HellWorld 项目了，所以你选择“**This Window（在当前窗口中打开）**”。

![.](https://s2.loli.net/2024/01/10/73pgPUastnMj5Al.png)

新窗口打开后，和之前一样，在左下角**找到锤子图标**（构建日志），单击打开，等一小会，直到 Build 菜单中的**构建操作完成**。

?> 如果网络条件不好，那么就仿照着 1-1 中的操作，再**设置一次镜像**（编辑 `build.gradle` 和 `gradle/wrapper/gradle-wrapper.properties`）。

!> 请手动修改文件，**不要把 HellWorld 中的文件直接复制过来** —— 它们的内容不完全一样！

构建完成后，和 1-1 中一样，你应当看到 `BUILD SUCCESSFUL` 字样：

![.](https://s2.loli.net/2024/01/10/1gb4aGRiJCLBU9Q.png)

那么这就 OK 了。

下一节中，我们要讲解一些有关于 Minecraft 的技术性知识，以便于我们后续编写事件处理的代码。这不会需要太久的。
